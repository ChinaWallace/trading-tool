# è¶…çº§è¶‹åŠ¿ä¿¡å·ä½¿ç”¨ç¤ºä¾‹

## åŠŸèƒ½è¯´æ˜

å·²å®ç°å®Œæ•´çš„å¤šå‘¨æœŸSuperTrendä¿¡å·åˆ†æåŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®æ—¥çº¿ã€4å°æ—¶ã€1å°æ—¶ã€15åˆ†é’Ÿå››ä¸ªæ—¶é—´å‘¨æœŸçš„SuperTrendæŒ‡æ ‡ï¼Œç”Ÿæˆäº¤æ˜“ä¿¡å·å’Œæ¨é€é€šçŸ¥ã€‚

## æ ¸å¿ƒç‰¹ç‚¹

- âœ… **æ— éœ€é‡æ–°è®¡ç®—æŒ‡æ ‡**ï¼šç›´æ¥ä½¿ç”¨ä¼ å…¥æ•°æ®ä¸­å·²è®¡ç®—å¥½çš„`supertrend`å±æ€§
- âœ… **æ™ºèƒ½ä¿¡å·è¯†åˆ«**ï¼šå®ç°ç­–ç•¥æ–‡æ¡£ä¸­çš„10ç§ä¿¡å·ç»„åˆåˆ¤æ–­
- âœ… **åˆ†çº§é€šçŸ¥æ¨é€**ï¼šæ ¹æ®ä¿¡å·å¼ºåº¦æä¾›ä¸åŒçº§åˆ«çš„é€šçŸ¥
- âœ… **æ‰¹é‡åˆ†ææ”¯æŒ**ï¼šå¯åŒæ—¶åˆ†æå¤šä¸ªäº¤æ˜“å¯¹

## æ•°æ®è¾“å…¥è¦æ±‚

ä¼ å…¥çš„`List<MarketQuotation>`æ•°æ®å¿…é¡»åŒ…å«ï¼š
- åŸºç¡€OHLCVæ•°æ®ï¼ˆå¼€é«˜ä½æ”¶é‡ï¼‰
- **å·²è®¡ç®—çš„`supertrend`å±æ€§**ï¼ˆåŒ…å«`isUptrend`å¸ƒå°”å€¼ï¼‰

## åŸºæœ¬ä½¿ç”¨æ–¹æ³•

### 1. å•ä¸ªäº¤æ˜“å¯¹ä¿¡å·åˆ†æ

```java
@Autowired
private SuperTrendSignalService signalService;

// å‡†å¤‡å·²åŒ…å«SuperTrendæŒ‡æ ‡çš„å¤šå‘¨æœŸæ•°æ®
Map<IntervalEnum, List<MarketQuotation>> timeFrameData = new HashMap<>();
timeFrameData.put(IntervalEnum.ONE_DAY, dailyData);        // æ—¥çº¿æ•°æ®
timeFrameData.put(IntervalEnum.FOUR_HOUR, fourHourData);   // 4å°æ—¶æ•°æ®
timeFrameData.put(IntervalEnum.ONE_HOUR, oneHourData);     // 1å°æ—¶æ•°æ®
timeFrameData.put(IntervalEnum.FIFTEEN_MINUTE, fifteenMinData); // 15åˆ†é’Ÿæ•°æ®

// åˆ†æä¿¡å·
SuperTrendSignalResult result = signalService.analyzeMultiTimeFrameSignal("BTCUSDT", timeFrameData);

// æŸ¥çœ‹ç»“æœ
System.out.println("ä¿¡å·çº§åˆ«: " + result.getSignalLevel().getName());
System.out.println("ç­–ç•¥å»ºè®®: " + result.getSignalCombination().getStrategy());
```

### 2. åˆ†æå¹¶æ¨é€é€šçŸ¥

```java
@Autowired
private SuperTrendNotificationService notificationService;

// åˆ†æå¹¶æ¨é€ï¼ˆåªæ¨é€æœ‰æ„ä¹‰çš„ä¿¡å·ï¼Œè§‚æœ›çº§åˆ«ä¸æ¨é€ï¼‰
boolean pushSuccess = notificationService.analyzeAndPushSignal("BTCUSDT", timeFrameData);

if (pushSuccess) {
    System.out.println("ä¿¡å·é€šçŸ¥æ¨é€æˆåŠŸ");
} else {
    System.out.println("ä¿¡å·çº§åˆ«ä¸ºè§‚æœ›æˆ–æ¨é€å¤±è´¥");
}
```

### 3. REST APIè°ƒç”¨

```bash
# åˆ†æå•ä¸ªäº¤æ˜“å¯¹
POST /api/supertrend/analyze/BTCUSDT
Content-Type: application/json

{
  "dailyData": [...],      // æ—¥çº¿Kçº¿æ•°æ®ï¼ˆå·²å«SuperTrendï¼‰
  "fourHourData": [...],   // 4å°æ—¶Kçº¿æ•°æ®ï¼ˆå·²å«SuperTrendï¼‰
  "oneHourData": [...],    // 1å°æ—¶Kçº¿æ•°æ®ï¼ˆå·²å«SuperTrendï¼‰
  "fifteenMinData": [...]  // 15åˆ†é’ŸKçº¿æ•°æ®ï¼ˆå·²å«SuperTrendï¼‰
}

# åˆ†æå¹¶æ¨é€é€šçŸ¥
POST /api/supertrend/analyze-and-push/BTCUSDT
```

## ä¿¡å·åˆ¤æ–­é€»è¾‘

### 10ç§ä¿¡å·ç»„åˆ

æ ¹æ®4ä¸ªæ—¶é—´å‘¨æœŸçš„SuperTrendæ–¹å‘ç»„åˆï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹ä¿¡å·ç±»å‹ï¼š

| ç»„åˆ | æ—¥çº¿ | 4H | 1H | 15min | ä¿¡å·ç±»å‹ | çº§åˆ« | ç­–ç•¥å»ºè®® |
|------|------|----|----|-------|----------|------|----------|
| â‘  | â†‘ | â†‘ | â†‘ | â†‘ | å¼ºåŠ¿å¤šå¤´å…±æŒ¯ | ğŸ”µ å¼ºçƒˆ | åšå†³åšå¤šï¼Œåˆ†æ‰¹å»ºä»“ |
| â‘¡ | â†‘ | â†‘ | â†‘ | â†“ | å›è°ƒä¸­å¤šå¤´ | ğŸŸ¡ ä¸­ç­‰ | ç­‰å¾…å›è°ƒç»“æŸå†åšå¤š |
| â‘¢ | â†‘ | â†‘ | â†“ | â†‘ | çŸ­çº¿åå¼¹ | ğŸŸ¡ ä¸­ç­‰ | å¿«è¿›å¿«å‡ºçŸ­å¤šå• |
| â‘£ | â†‘ | â†“ | â†‘ | â†‘ | èƒŒç¦»å¤šå¤´ | ğŸŸ¡ ä¸­ç­‰ | å¿«è¿›å¿«å‡ºæˆ–æ§åˆ¶ä»“ä½ |
| â‘¤ | â†“ | â†“ | â†“ | â†“ | å¼ºåŠ¿ç©ºå¤´å…±æŒ¯ | ğŸ”µ å¼ºçƒˆ | åšç©ºä¸ºä¸»ï¼Œé¡ºåŠ¿æ“ä½œ |
| â‘¥ | â†“ | â†“ | â†“ | â†‘ | çŸ­çº¿åå¼¹ | ğŸŸ¡ ä¸­ç­‰ | åå¼¹åšç©ºï¼Œè®¾å¥½æ­¢æŸ |
| â‘¦ | â†“ | â†“ | â†‘ | â†‘ | åè½¬å°è¯• | ğŸŸ  è¾ƒå¼± | å¤šå•è¯•æ¢ä»‹å…¥ |
| â‘§ | â†“ | â†‘ | â†‘ | â†‘ | åº•éƒ¨åè½¬ | ğŸŸ¡ ä¸­ç­‰ | å°è¯•åº•éƒ¨å»ºä»“ |
| â‘¨ | â†‘ | â†‘ | â†“ | â†“ | å›è°ƒç¡®è®¤ | âšª è§‚æœ› | ç­‰å¾…è¶‹åŠ¿é‡è½¬ |
| â‘© | å…¶ä»– | - | - | - | ä¿¡å·æ··ä¹± | âšª è§‚æœ› | ä¸å»ºè®®æ“ä½œ |

### è¶‹åŠ¿æ–¹å‘è¯»å–

ç³»ç»Ÿä»`MarketQuotation.supertrend.isUptrend`å±æ€§è¯»å–è¶‹åŠ¿æ–¹å‘ï¼š
- `true` = â†‘ ä¸Šå‡è¶‹åŠ¿  
- `false` = â†“ ä¸‹é™è¶‹åŠ¿
- `null` = / è¶‹åŠ¿ä¸æ˜ç¡®

## é€šçŸ¥æ¶ˆæ¯æ ¼å¼

### å¼ºçƒˆä¿¡å·ç¤ºä¾‹
```
ğŸ“Š ã€äº¤æ˜“ä¿¡å· - BTCUSDTã€‘

ğŸ• å‘¨æœŸè¶‹åŠ¿åˆ†æï¼š
â”œ æ—¥çº¿ï¼šâ†‘ ä¸Šå‡
â”œ 4å°æ—¶ï¼šâ†‘ ä¸Šå‡  
â”œ 1å°æ—¶ï¼šâ†‘ ä¸Šå‡
â”” 15åˆ†é’Ÿï¼šâ†‘ ä¸Šå‡

ğŸ”µ å¼ºçƒˆçº§åˆ«

âœ… å¤šå‘¨æœŸå…±æŒ¯åšå¤šä¿¡å·ï¼Œå»ºè®®ç«‹å³å»ºä»“

ğŸ’¡ ç­–ç•¥å»ºè®®ï¼šåšå†³åšå¤šï¼Œåˆ†æ‰¹å»ºä»“

â° åˆ†ææ—¶é—´ï¼š2025-01-27 10:30:00
```

### å¤šå¸ç§æ¦‚è§ˆç¤ºä¾‹
```
ğŸ“Š å¤šå¸ç§è¶…çº§è¶‹åŠ¿ä¿¡å·æ¦‚è§ˆ

ğŸ”µ BTCUSDT: â†‘â†‘â†‘â†‘ âœ… å¤šå‘¨æœŸå…±æŒ¯åšå¤šä¿¡å·ï¼Œå»ºè®®ç«‹å³å»ºä»“
ğŸŸ¡ ETHUSDT: â†‘â†‘â†‘â†“ ğŸ”„ 15åˆ†é’Ÿå›è°ƒä¸­ï¼Œå»ºè®®ç­‰å¾…çŸ­çº¿ä¼ç¨³å†ä»‹å…¥
ğŸŸ  ADAUSDT: â†“â†“â†‘â†‘ ğŸ” æ½œåœ¨åº•éƒ¨åè½¬ï¼Œå»ºè®®è½»ä»“å…¥åœºè§‚å¯Ÿ

ğŸ“ˆ ç»Ÿè®¡ï¼šå¼ºçƒˆä¿¡å· 1 ä¸ªï¼Œä¸­ç­‰ä¿¡å· 1 ä¸ª
â° åˆ†ææ—¶é—´ï¼š2025-01-27 10:30:00
```

## æ•°æ®å‡†å¤‡ç¤ºä¾‹

```java
// ç¤ºä¾‹ï¼šå‡†å¤‡åŒ…å«SuperTrendçš„Kçº¿æ•°æ®
List<MarketQuotation> dailyData = new ArrayList<>();
for (KlineData kline : klineList) {
    MarketQuotation quotation = new MarketQuotation();
    // è®¾ç½®åŸºç¡€æ•°æ®
    quotation.setOpen(kline.getOpen());
    quotation.setHigh(kline.getHigh());
    quotation.setLow(kline.getLow());
    quotation.setClose(kline.getClose());
    quotation.setVolume(kline.getVolume());
    quotation.setTimestamp(kline.getTimestamp());
    
    // è®¾ç½®å·²è®¡ç®—çš„SuperTrendï¼ˆå…³é”®æ­¥éª¤ï¼‰
    Supertrend supertrend = new Supertrend(supertrendValue, isUptrend);
    quotation.setSupertrend(supertrend);
    
    dailyData.add(quotation);
}
```

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿æ¯ä¸ªæ—¶é—´å‘¨æœŸçš„æ•°æ®éƒ½åŒ…å«æœ‰æ•ˆçš„SuperTrendæŒ‡æ ‡
2. **æ—¶é—´åŒæ­¥**ï¼šå„å‘¨æœŸçš„æœ€æ–°æ•°æ®æ—¶é—´åº”è¯¥ç›¸å¯¹åŒæ­¥
3. **æ¨é€æ§åˆ¶**ï¼šç³»ç»Ÿåªæ¨é€å¼ºçƒˆã€ä¸­ç­‰ã€è¾ƒå¼±çº§åˆ«çš„ä¿¡å·ï¼Œè§‚æœ›çº§åˆ«ä¸æ¨é€
4. **å¼‚å¸¸å¤„ç†**ï¼šå¦‚æœSuperTrendæ•°æ®ç¼ºå¤±ï¼Œç³»ç»Ÿä¼šè®°å½•è­¦å‘Šå¹¶è¿”å›"ä¸æ˜ç¡®"è¶‹åŠ¿
5. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ— éœ€é‡å¤è®¡ç®—æŒ‡æ ‡ï¼Œç›´æ¥ä½¿ç”¨å·²æœ‰ç»“æœï¼Œæé«˜åˆ†ææ•ˆç‡

## æ‰©å±•ä½¿ç”¨

### è‡ªå®šä¹‰æ¨é€æ¸ é“

ç»§æ‰¿`SuperTrendNotificationService`å¹¶é‡å†™æ¨é€æ–¹æ³•ï¼š

```java
@Service
public class CustomNotificationService extends SuperTrendNotificationService {
    
    @Override
    protected boolean pushNotificationCallback(String content) {
        // å®ç°è‡ªå®šä¹‰æ¨é€é€»è¾‘ï¼ˆå¦‚é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ã€Telegramç­‰ï¼‰
        return yourCustomPushMethod(content);
    }
}
```

### æ‰¹é‡ç›‘æ§

```java
// ç›‘æ§å¤šä¸ªäº¤æ˜“å¯¹
Map<String, Map<IntervalEnum, List<MarketQuotation>>> symbolDataMap = new HashMap<>();
symbolDataMap.put("BTCUSDT", btcTimeFrameData);
symbolDataMap.put("ETHUSDT", ethTimeFrameData);
symbolDataMap.put("ADAUSDT", adaTimeFrameData);

// æ‰¹é‡åˆ†æå¹¶æ¨é€æ¦‚è§ˆ
notificationService.analyzeMultipleSymbolsAndPush(symbolDataMap);
```

è¿™æ ·å°±å¯ä»¥é«˜æ•ˆåœ°ä½¿ç”¨å·²è®¡ç®—çš„SuperTrendæ•°æ®è¿›è¡Œå¤šå‘¨æœŸä¿¡å·åˆ†æå’Œé€šçŸ¥æ¨é€äº†ï¼ 